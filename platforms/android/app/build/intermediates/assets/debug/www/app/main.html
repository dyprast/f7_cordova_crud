<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#2196f3">
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap:">
  <title>Framework7</title>
  <link rel="stylesheet" href="../packages/core/css/framework7.bundle.min.css">
  <link rel="stylesheet" href="../css/app.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/content.css">
  <link rel="stylesheet" href="../css/preloader.css">
  <link rel="apple-touch-icon" href="../img/f7-icon-square.png">
  <link rel="icon" href="../img/f7-icon.png">
</head>
<body>
  <div id="app">
    <div class="statusbar"></div>
    <div class="panel panel-left panel-cover">
      <div class="page">
        <div class="page-content">
          <div class="top-left-panel">
            <div class="bg-img">
              <img src="../img/lock.jpg">
              <div class="overlay-img"></div>
            </div>
            <img src="../img/profile.jpg" class="img-profile">
            <div class="block-title">Romadhan</div>
            <div class="block">
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
            </div>
          </div>
          <div class="list links-list">
            <ul>
              <li>
                <a href="../" class="link external panel-close"><i class="material-icons">dashboard</i> Dashboard</a>
              </li>
              <li>
                <a href="#" class="panel-close active"><i class="f7-icons">persons_round_fill</i> Crud Nama</a>
              </li>
              <li>
                <a href="/info/" class="panel-close"><i class="f7-icons">info_round_fill</i> Info</a>
              </li>
              <li>
                <a href="/settings/" class="panel-close"><i class="material-icons">settings</i> Settings</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="popover more">
      <div class="popover-angle"></div>
      <div class="popover-inner">
        <div class="list">
          <ul>
            <li><a href="https://romadhanedy.ga/" class="link external list-button popover-close"><i class="f7-icons">world_fill</i> My Website</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="view view-main view-init safe-areas" data-master-detail-breakpoint="800" data-url="/">
      <div class="page">
        <div class="block block-strong text-align-center preload-style">
          <div class="preloader color-multi"></div>
        </div>
        <div class="fab fab-extended fab-right-bottom">
          <a href="#" class="popup-open" data-popup=".demo-popup">
            <i class="icon f7-icons ios-only">add</i>
            <i class="icon material-icons md-only">add</i>
          </a>
          <button style="display: none;" class="popup-open" data-popup=".demo-popup" id="show_modal"></button>
        </div>
        <div class="navbar">
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link icon-only panel-open" data-panel="left">
                <i class="material-icons">menu</i>
              </a>
            </div>
            <div class="title">Crud Nama</div>
            <div class="right">
              <a class="link icon-only popover-open" data-popover=".more">
                <i class="material-icons">more_vert</i>
              </a>
            </div>
          </div>
        </div>
        <div class="page-content">
          <div class="block-title">Geser ke kanan untuk aksi</div>
          <div class="list">
            <ul id="list_database">
              
            </ul>
          </div>
        </div>

        <!-- FORM TAMBAH DATA -->
        <div class="popup demo-popup">
          <div class="page">
            <div class="navbar">
              <div class="navbar-inner">
                <div class="title pop-up">Tambah Data</div>
                <div class="right"><a href="#" class="link popup-close"><i class="f7-icons">close</i></a></div>
                <button style="display: none;" id="close_modal" class="link popup-close"></button>
              </div>
            </div>
            <div class="page-content">
              <div class="block">
                <center><span class="f7-icons" style="font-size: 35px;">person_round_fill</span></center>
                <form method="POST" class="list form-store-data" id="form_post">
                  <ul>
                    <li class="item-content item-input">
                      <div class="item-inner">
                        <div class="item-title item-floating-label">Nama Depan</div>
                        <div class="item-input-wrap">
                          <input name="fname" id="fname" type="text" placeholder="Nama Depan">
                          <span class="input-clear-button"></span>
                        </div>
                      </div>
                    </li>
                    <li class="item-content item-input">
                      <div class="item-inner">
                        <div class="item-title item-floating-label">Nama Belakang</div>
                        <div class="item-input-wrap">
                          <input name="lname" id="lname" type="text" placeholder="Nama Belakang">
                          <span class="input-clear-button"></span>
                        </div>
                      </div>
                    </li>
                    <li class="item-content item-input">
                      <div class="item-inner">
                        <button type="submit" class="button button-fill color-blue" id="btn_post">TAMBAH</button>
                      </div>
                    </li>
                  </ul>
                  <input type="hidden" name="id" id="data_id">
                  <input type="hidden" name="action" value="insert" id="action_status">
                </form>
              </div>
            </div>
          </div>
        </div>
        <!-- END FORM TAMBAH DATA -->
      </div>
    </div>
  </div>
  <script src="../packages/core/js/framework7.bundle.min.js"></script>
  <script src="../js/routes.js"></script>
  <script src="../js/app.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script>
      setTimeout(function() {
          $(".preload-style").css('display', 'none');
      }, 1000);
      load();
      function load(){
          $.ajax({
          url:"http://192.168.100.4/ajax/android2/app/api/read.php",
          method:"POST",
          success:function(data)
          {
            $('#list_database').append(data);
          }
        });
      }

      $('#form_post').on('submit', function(e){
        e.preventDefault();
        $('#btn_post').attr('disabled', 'disabled');
        var form_data = $(this).serialize();
        $.ajax({
          url: "http://192.168.100.4/ajax/android2/app/api/controller.php",
          method: "POST",
          data: form_data,
          success: function(data){
            $('#list_database').html('');
            load();
            $('#form_post')[0].reset();
            $('#btn_post').attr('disabled', false);
            $('#close_modal').click();
          }
        });
      });

      $(document).on('click', '.edit', function(){
        var id = $(this).attr("id");
        var action = "get_data";
        $.ajax({
          url: "http://192.168.100.4/ajax/android2/app/api/controller.php",
          method: "POST",
          data: {id:id, action:action},
          dataType: "json",
          success:function(data){
            $('#fname').val(data.first_name);
            $('#lname').val(data.last_name);
            $('#data_id').val(id);
            $('#action_status').val('update');
            $('#btn_post').html('Update');
            $('#show_modal').click();
          }
        });
      });

      $(document).on('click', '.delete', function(){
        var id = $(this).attr("id");
        var action = "delete";
        $.ajax({
          url: "./http://192.168.100.4/ajax/android2/app/api/controller.php",
          method: "POST",
          data: {id:id, action:action},
          success:function(data){
          }
        });
      });
  </script>
</body>
</html>
